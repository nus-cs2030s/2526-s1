layout: true
class: basic, layout, imaging, fonts, lists, cards, fadein, tabler
name: content
<div class="basic header"></div>
<div class="basic footer"><p>CS2030S: Programming Methodology II -- Adi Yoga Sidi Prabawa</p></div>

---

name: L09
class: bottom, titles

# CS2030S
## Programming Methodology II
### L09: Infinite List & Stream

.abs.top2.rt4[.img110[![QR](img/dcsaysp.png)]]

---
name: List
class: sections

.topsub.subsections[
### Motivation
]
.botbody.oldsections[
#### Size

.col100[
.font20[
```java[lite=4]
class Seq<T> {
  private T[] arr;

  public Seq(int size) {
    // blah.. blah.. blah..
    @SuppressWarnings("unchecked")
    T[] temp = (T[]) new Object[size];
    this.arr = temp;
  }
}
```
]

.card.bg-r[
##### Question
.content.tight[
What happen if we do not know the size in advanced?
]
]
]
]

---

.topsub.subsections[
### Motivation
### List
]
.botbody.oldsections[
#### Idea [<i class="fas fa-angles-right abs rt5"></i>](#infinilist)

.col100[
![EagerList](img/09-Eager01a.png)
]

.col100.rvl-tgl[
.font20[
```java
class EagerList<T> {
  private final T head;
  private final EagerList<T> tail;
}
```
]
]
]

---
name: eagerlist

.topsub.subsections[
### Motivation
### List
]
.botbody.oldsections[
#### Idea [<i class="fas fa-angles-right abs rt5"></i>](#infinilist)

.col100[
![EagerList](img/09-Eager01a.png)
]

.col100[
.font16[
```java
class EagerList<T> {
  private final T head;
  private final EagerList<T> tail;
​
  public static <T> EagerList<T> generate(T t, int size) { .. }
  // [t, t, t, t, ...]

  public static <T> EagerList<T> iterate(
      T init,
      BooleanCondition<T> pred,
      Transformer<T, T> next
  ) { .. }
  // [init, next(init), next(next(init)), ...]
  ​
  public <U> EagerList<U> map(Transformer<T, U> fn) { .. }
  public EagerList<T> filter(BooleanCondition<T> pred) { .. }
}
```
]
]
]

---

.topsub.subsections[
### Motivation
### List
### Methods
#### Generate
]
.botbody.oldsections[
#### Generate

.col100[
.img70[![Map](img/09-EagerA.png)]
]
]

---

.topsub.subsections[
### Motivation
### List
### Methods
#### Generate
#### Iterate
]
.botbody.oldsections[
#### Iterate

.col100[
.img70[![Map](img/09-EagerB.png)]
]
]

---

.topsub.subsections[
### Motivation
### List
### Methods
#### Generate
#### Iterate
#### Map
]
.botbody.oldsections[
#### Map

.col100.unrvl-step[
![Map](img/09-Eager02a.png)
.unrvl-num[1]
]
.col100.rvl-step.unrvl-step[
![Map](img/09-Eager02b.png)
.rvl-num[1].unrvl-num[2]
]
.col100.rvl-step.unrvl-step[
![Map](img/09-Eager02c.png)
.rvl-num[2].unrvl-num[3]
]
.col100.rvl-step.unrvl-step[
![Map](img/09-Eager02d.png)
.rvl-num[3].unrvl-num[4]
]
.col100.rvl-step.unrvl-step[
![Map](img/09-Eager02e.png)
.rvl-num[4].unrvl-num[5]
]
.col100.rvl-step[
![Map](img/09-Eager02f.png)
.rvl-num[5]
]
]

---

.topsub.subsections[
### Motivation
### List
### Methods
#### Generate
#### Iterate
#### Map
#### Filter
]
.botbody.oldsections[
#### Filter

.col100.unrvl-step[
![Filter](img/09-Eager03a.png)
.unrvl-num[1]
]
.col100.rvl-step.unrvl-step[
![Filter](img/09-Eager03b.png)
.rvl-num[1].unrvl-num[2]
]
.col100.rvl-step.unrvl-step[
![Filter](img/09-Eager03c.png)
.rvl-num[2].unrvl-num[3]
]
.col100.rvl-step[
![Filter](img/09-Eager03d.png)
.rvl-num[3]
]
]

---

.topsub.subsections[
### Motivation
### List
### Methods
### Quizzes
#### Quiz #1
]
.botbody.oldsections[
#### Quiz #1

.col100[
.card.bg-r[
##### Question
.content.tight[
Consider the following code snippet.
What is the result of the highlighted line?
]
]
]

.vs10[]

.col100[
.font16[
```java[lite=5]
EagerList<Integer> l = EagerList
    .iterate(1,   i -> i < 10,   i -> i + 1)
    .filter(i -> i % 3 == 0)
    .map(i -> i * 2);
l.tail().tail().head();
```
]
]

.col100[
.atbl.blhead.font14[
| Tracing |
|---|
| <input type="text" class="text-editor editor14 wt95"></input> |
| <input type="text" class="text-editor editor14 wt95"></input> |
| <input type="text" class="text-editor editor14 wt95"></input> |
| <input type="text" class="text-editor editor14 wt95"></input> |
]
]

.mrq[
1. .quiz-choice[6] .quiz-ans[0] .quiz-hint[NO]
1. .quiz-choice[12] .quiz-ans[0] .quiz-hint[NO]
1. .quiz-choice[18] .quiz-ans[1] .quiz-hint[YES: [6, 12, 18]]
1. .quiz-choice[24] .quiz-ans[0] .quiz-hint[NO]
1. .quiz-choice[30] .quiz-ans[0] .quiz-hint[NO]

.quizzes-time[120]
]
]

---
name: Infinite_List
class: sections

.topsub.subsections[
### Motivation
]
.botbody.oldsections[
#### Infinity

.col100[
.card.bg-r[
##### Question
.content.tight[
Consider the following code snippet. What is the result of the highlighted line?
]
]
]

.vs10[]

.col100[
.font16[
```java[lite=2,5]
EagerList<Integer> l = EagerList
    .iterate(1,   i -> i > -1,   i -> i + 1)
    .filter(i -> i % 3 == 0)
    .map(i -> i * 2);
l.tail().tail().head();
```
]
]
]

---

.topsub.subsections[
### Motivation
### Infinite List
]
.botbody.oldsections[
#### Idea [<i class="fas fa-angles-left abs rt5"></i>](#eagerlist)

.col100[
![EagerList](img/09-Infinite00.png)
]

.col100.rvl-tgl[
.font20[
```java
class InfiniteList<T> {
  private final Producer<T> head;
  private final Producer<InfiniteList<T>> tail;
}
```
]
]
]

---
name: infinilist

.topsub.subsections[
### Motivation
### Infinite List
]
.botbody.oldsections[
#### Idea [<i class="fas fa-angles-left abs rt5"></i>](#eagerlist)

.col100[
![EagerList](img/09-Infinite00.png)
]

.col100[
.font16[
```java
class InfiniteList<T> {
  private final Producer<T> head;
  private final Producer<InfiniteList<T>> tail;
​
  public static <T> InfiniteList<T> generate(Producer<T> prod)
    { .. } // [t, t, t, t, ...]

  public static <T> InfiniteList<T> iterate(
      T init,
      ​
      Transformer<T, T> next
  ) { .. }
  // [init, next(init), next(next(init)), ...]
​
  public <U> InfiniteList<U> map(Transformer<T, U> fn) { .. }
  public InfiniteList<T> filter(BooleanCondition<T> pred) { .. }
}
```
]
]
]

---

.topsub.subsections[
### Motivation
### Infinite List
### Visualization
]
.botbody.oldsections[

.col100[
.fsize240[
.center[[<i class="fa-solid fa-eye"></i>](09_visualization.html)]
]
]
]

---

name: Break
class: middle, break

# Break

<br>

## <i class="fa-regular fa-clock break-icon"></i>

---
name: Streams
class: sections

.topsub.subsections[
### Java API
]
.botbody.oldsections[
#### Function

.col100[
##### java.util.function

.atbl.blhead.font20[
| cs2030s.fp | java.util.function |
|---|---|
| `BooleanCondition<T>::test` | [`Predicate<T>::test`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Predicate.html#test%28T%29) |
| `Producer<T>::produce` | [`Supplier<T>::get`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Supplier.html#get%28%29) |
| `Consumer<T>::consume` | [`Consumer<T>::accept`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Consumer.html#accept%28T%29) |
| `Transformer<T,R>::transform` | [`Function<T,R>::apply`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/Function.html#apply%28T%29) |
| `Transformer<T,T>::transform` | [`UnaryOperator<T>::apply`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/UnaryOperator.html) |
| `Combiner<S,T,R>::combine` | [`BiFunction<S,T,R>::apply`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/function/BiFunction.html#apply%28T,U%29) |
]
]

.vs10[]

.col100[
##### java.util

.atbl.blhead.font20[
| cs2030s.fp | java.util |
|---|---|
| `Maybe<T>` | [`java.util.Optional<T>`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Optional.html) |
| `Lazy<T>` | _N/A_ |
| `InfiniteList<T>` | [`java.util.Stream<T>`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html) |
]
]
]

---

.topsub.subsections[
### Java API
### Pipeline
#### Overview
]
.botbody.oldsections[
#### Overview

.col100[
.center[![Pipeline](img/09-Stream.png)]
]
.col33[
.card.bg-g[
##### Data Source
.content.tight[
Produce a stream.<br><br>
]
]
]
.col33[
.card.bg-y[
##### Intermediate Op
.content.tight[
Transform a stream into another stream.
]
]
]
.col33[
.card.bg-r[
##### Terminal Op
.content.tight[
Consumes a stream.<br><br>
]
]
]
]

---

.topsub.subsections[
### Java API
### Pipeline
#### Overview
#### Data Source
]
.botbody.oldsections[
#### Data Source

.col100[
.center[![Pipeline](img/09-StreamA.png)]
]
.col33[
.card.bg-g[
##### Data Source
.content.tight[
Produce a stream.<br><br>
]
]
]
.col33.op30[
.card.bg-y[
##### Intermediate Op
.content.tight[
Transform a stream into another stream.
]
]
]
.col33.op30[
.card.bg-r[
##### Terminal Op
.content.tight[
Consumes a stream.<br><br>
]
]
]

.vs10[]

.col100[
##### Static Factory Methods

.fsize20[
- [`Stream::of(T...)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#of%28T...%29)
- [`Stream::generate(Supplier<? extends T>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#generate%28java.util.function.Supplier%29)
- [`Stream::iterate(T, Predicate<? super T>, UnaryOperator<T>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#iterate%28T,java.util.function.Predicate,java.util.function.UnaryOperator%29)
]

##### Conversion from Other Data Types

.fsize20[
- [`Arrays::stream(T[])`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Arrays.html#stream%28T[]%29)
- [`Collection::stream()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html#stream%28%29)
]
]
]

---

.topsub.subsections[
### Java API
### Pipeline
#### Overview
#### Data Source
#### Intermediate
]
.botbody.oldsections[
#### Intermediate

.col100[
.center[![Pipeline](img/09-StreamB.png)]
]
.col33.op30[
.card.bg-g[
##### Data Source
.content.tight[
Produce a stream.<br><br>
]
]
]
.col33[
.card.bg-y[
##### Intermediate Op
.content.tight[
Transform a stream into another stream.
]
]
]
.col33.op30[
.card.bg-r[
##### Terminal Op
.content.tight[
Consumes a stream.<br><br>
]
]
]

.vs10[]

.col100[
##### Stateless

.fsize20[
- [`Stream::filter(Predicate<? super T>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#filter&#40;java.util.function.Predicate&#41;)
.nol[
- .note18[Keep the element if the predicate returns true on the element]
]
- [`Stream::map(Function<? super T, ? extends R>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#map&#40;java.util.function.Function&#41;)
.nol[
- .note18[Transform each element with the given function]
]
- [`Stream::flatMap(Function<? super T, ? extends Stream<? extends R>>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#flatMap&#40;java.util.function.Function&#41;)
.nol[
- .note18[map + flatten (i.e., no nested stream)]
]
]
]
]

---

.topsub.subsections[
### Java API
### Pipeline
#### Overview
#### Data Source
#### Intermediate
]
.botbody.oldsections[
#### Intermediate

.col100[
.center[![Pipeline](img/09-StreamB.png)]
]
.col33.op30[
.card.bg-g[
##### Data Source
.content.tight[
Produce a stream.<br><br>
]
]
]
.col33[
.card.bg-y[
##### Intermediate Op
.content.tight[
Transform a stream into another stream.
]
]
]
.col33.op30[
.card.bg-r[
##### Terminal Op
.content.tight[
Consumes a stream.<br><br>
]
]
]

.vs10[]

.col100[
##### Stateful

.fsize20[
- [`Stream::sorted()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#sorted&#40;&#41;)
- [`Stream::distinct()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#distinct&#40;&#41;)
]

##### Bounding

.fsize20[
- [`Stream::limit(long)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#limit&#40;long&#41;)
- [`Stream::takeWhile(Predicate<? super T>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#takeWhile&#40;java.util.function.Predicate&#41;)
.nol[
- Counterpart:
- [`Stream::dropWhile(Predicate<? super T>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#dropWhile&#40;java.util.function.Predicate&#41;)
]
]
]
]

---

.topsub.subsections[
### Java API
### Pipeline
#### Overview
#### Data Source
#### Intermediate
#### Terminal
]
.botbody.oldsections[
#### Terminal

.col100[
.center[![Pipeline](img/09-StreamC.png)]
]
.col33.op30[
.card.bg-g[
##### Data Source
.content.tight[
Produce a stream.<br><br>
]
]
]
.col33.op30[
.card.bg-y[
##### Intermediate Op
.content.tight[
Transform a stream into another stream.
]
]
]
.col33[
.card.bg-r[
##### Terminal Op
.content.tight[
Consumes a stream.<br><br>
]
]
]

.vs10[]

.col100[
##### Operations

.fsize20[
- [`Stream::forEach(Consumer<? super T>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#forEach&#40;java.util.function.Consumer&#41;)
.nol[
- .note18[Perform the operation specified by the consumer for each element]
]
- [`Stream::reduce(BinaryOperator<T>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#reduce&#40;java.util.function.BinaryOperator&#41;)
.nol[
- .note18[Perform a _reduction_ operation using the binary operator]
]
- [`Stream::count()`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#count&#40;&#41;)
.nol[
- .note18[Returns the number of element in the stream]
]
]
]
]

---

.topsub.subsections[
### Java API
### Pipeline
#### Overview
#### Data Source
#### Intermediate
#### Terminal
]
.botbody.oldsections[
#### Terminal

.col100[
.center[![Pipeline](img/09-StreamC.png)]
]
.col33.op30[
.card.bg-g[
##### Data Source
.content.tight[
Produce a stream.<br><br>
]
]
]
.col33.op30[
.card.bg-y[
##### Intermediate Op
.content.tight[
Transform a stream into another stream.
]
]
]
.col33[
.card.bg-r[
##### Terminal Op
.content.tight[
Consumes a stream.<br><br>
]
]
]

.vs10[]

.col100[
##### Element Matching

.font20[
- [`Stream::allMatch(Predicate<? super T>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#allMatch&#40;java.util.function.Predicate&#41;)
- [`Stream::anyMatch(Predicate<? super T>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#anyMatch&#40;java.util.function.Predicate&#41;)
- [`Stream::noneMatch(Predicate<? super T>)`](https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/stream/Stream.html#noneMatch&#40;java.util.function.Predicate&#41;)
]
]
]

---

.topsub.subsections[
### Java API
### Pipeline
### vs Infinite List
]
.botbody.oldsections[
#### Difference

.col100[
##### Stream Allows Peeking

.font20[
```java
Stream.iterate(0, x -> x + 1)
      .peek(System.out::println)
      .takeWhile(x -> x < 5)
      .forEach(x -> {});
```
]
]

.vs10[]

.col100[
##### Stream is Consumed At Most Once

.font20[
```java
Stream<Integer> s = Stream.iterate(0, x -> x + 1)
                          .takeWhile(x -> x < 5);
s.forEach(System.out::println);
s.forEach(System.out::println); // Fail!  

// We have to recreate the stream
```
]
]
]

---

.topsub.subsections[
### Java API
### Pipeline
### vs Infinite List
### Summary
#### Map
]
.botbody.oldsections[
#### Map

.col100[
![Map](img/09-map.png)
]
]

---

.topsub.subsections[
### Java API
### Pipeline
### vs Infinite List
### Summary
#### Map
#### Filter
]
.botbody.oldsections[
#### Filter

.col100[
![Filter](img/09-filter.png)
]
]

---

.topsub.subsections[
### Java API
### Pipeline
### vs Infinite List
### Summary
#### Map
#### Filter
#### FlatMap
]
.botbody.oldsections[
#### FlatMap

.col100[
![FlatMap](img/09-flatmap.png)
]
]

---

.topsub.subsections[
### Java API
### Pipeline
### vs Infinite List
### Summary
#### Map
#### Filter
#### FlatMap
#### Reduce
]
.botbody.oldsections[
#### Reduce

.col100[
![Reduce](img/09-reduce.png)
]
]

---

class: middle, end, fadein

.eol[`jshell> /exit`]


.eol[`| Goodbye`]